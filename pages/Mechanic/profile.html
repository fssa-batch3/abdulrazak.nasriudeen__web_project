<!DOCTYPE html>
<html>
  <head>
    <title>Mechanic Profile</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend+Deca&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/suryaumapathy2812/notify__js/notify.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../../assets/css/profile.css"
    />
  </head>
  <body>
    <div class="side">
      <!-- <video src="../../assets/images/home/Status update.mp4"></video> -->
      <img src="../../assets/images/home/Status update.gif" alt="" />
      <div class="profile">
        <!-- <img src="../../assets/images/logo.png" width="10px" height="10px" /> -->

        <h1 id="h_name"></h1>
        <!-- <h2>Please fill your details</h2> -->
      </div>
      <div class="buttonCont">
        <button
          class="button"
          onclick="openprofile('personal','B_pro')"
          id="B_pro"
        >
          Personal
        </button>
        <button
          class="button"
          onclick="openprofile('Work_shop','W_pro')"
          id="W_pro"
        >
          Workshop
        </button>
        <button
          class="button"
          onclick="openprofile('Services','s_pro')"
          id="s_pro"
        >
          Service provided
        </button>
      </div>
      <p>Edit your profile here</p>
      <!-- <button class="com">Complete Profile</button> -->
    </div>
    <div class="container" id="personal">
      <h1>Personal details</h1>
      <form id="personal_form">
        <label for="name"
          >Name:

          <input
            type="text"
            pattern="[A-Za-z ]{2,30}"
            id="name"
            name="name"
            title="Only Alphabets are acceptable"
            required
          />
        </label>

        <label for="email"
          >Email:

          <input type="email" id="email" name="email" required />
        </label>

        <label for="password"
          >Password:

          <input
            type="password"
            title="six digit required"
            pattern="[A-Za-z0-9]{6}"
            id="password"
            name="password"
            required
          />
        </label>

        <label for="phone"
          >Phone:
          <input
            type="tel"
            id="phone"
            name="phone"
            pattern="[0-9]{10}"
            required
          />
        </label>

        <label for="v_type">
          Specialized_in:
          <select id="v_type" name="v_type">
            <option value="select your type">select your vehicle type</option>
            <option value="Two Wheelers">Two Wheelers</option>
            <option value="Three Wheelers">Three Wheelers</option>
            <option value="Four Wheelers">Four Wheelers</option>
          </select>
        </label>
        <label for="E_year"
          >Experience:
          <select id="E_year" name="E_year">
            <option value="">select Experience in years</option>
            <option value="1 year">1 year</option>
            <option value="2 years">2 years</option>
            <option value="3 years">3 years</option>
            <option value="4 years">4 years</option>
            <option value="5 years">5 years</option>
            <option value="6 years">6 years</option>
            <option value="7 years">7 years</option>
            <option value="more than 7 years">more than 7 years</option>
          </select></label
        >
        <label for="profile-pic"
          >ProfilePicture:

          <input type="text" id="profilepic" name="profile-pic" required />
        </label>

        <button type="submit">Next</button>
      </form>
    </div>
    <div class="container" id="Work_shop">
      <h1>Your Workshop details</h1>
      <form id="workShopForm">
        <label for="workshopName"
          >Workshop_Name:

          <input
            type="text"
            name=""
            required
            title="Only Alphabets are acceptable"
            pattern="[A-Za-z ]{4,30}"
            id="workshopName"
          />
        </label>

        <label for="workshopNumber"
          >Workshop_Number:
          <input
            type="num"
            required
            pattern="[0-9]{10,14}"
            title="Only number are acceptable"
            id="workshopNumber"
          />
        </label>

        <label for="workshopAddress"
          >Workshop_Address
          <input
            type="text"
            pattern="[0-9A-Za-z ,:-]{5-50}"
            required
            id="workshopAddress"
            required
          />
        </label>
        <label for="city_state"
          >City:
          <select required id="workshopCity" name="city" required>
            <option value="">--Select city--</option>
            <option value="Chennai,TamilNadu">Chennai,TamilNadu</option>
            <option value="Coimbatore,TamilNadu">Coimbatore,TamilNadu</option>
            <option value="Salem,TamilNadu">Salem,TamilNadu</option>
            <option value="Madurai,TamilNadu">Madurai,TamilNadu</option>
            <option value="Tiruchirappalli,TamilNadu">
              Tiruchirappalli,TamilNadu
            </option>
            <option value="Thoothukudi,TamilNadu">Thoothukudi,TamilNadu</option>
            <option value="Vellore,TamilNadu">Vellore,TamilNadu</option>
            <option value="Dindigul,TamilNadu">Dindigul,TamilNadu</option>
            <option value="Tirunelveli,TamilNadu">Tirunelveli,TamilNadu</option>
            <option value="Tiruppur,TamilNadu">Tiruppur,TamilNadu</option>
            <option value="Cuddalore,TamilNadu">Cuddalore,TamilNadu</option>
            <option value="Karur,TamilNadu">Karur,TamilNadu</option>
            <option value="Kanchipuram,TamilNadu">Kanchipuram,TamilNadu</option>
            <option value="Nagapattinam,TamilNadu">
              Nagapattinam,TamilNadu
            </option>
            <option value="Pudukkottai,TamilNadu">Pudukkottai,TamilNadu</option>
            <option value="Sivaganga,TamilNadu">Sivaganga,TamilNadu</option>
            <option value="Kumbakonam,TamilNadu">Kumbakonam,TamilNadu</option>
            <option value="Karaikudi,TamilNadu">Karaikudi,TamilNadu</option>
            <option value="Hosur,TamilNadu">Hosur,TamilNadu</option>
            <option value="Ooty,TamilNadu">Ooty,TamilNadu</option>
            <option value="Ambur,TamilNadu">Ambur,TamilNadu</option>
            <option value="Gudiyatham,TamilNadu">Gudiyatham,TamilNadu</option>
            <option value="Pollachi,TamilNadu">Pollachi,TamilNadu</option>
            <option value="Sivakasi,TamilNadu">Sivakasi,TamilNadu</option>
            <option value="Komarapalayam,TamilNadu">
              Komarapalayam,TamilNadu
            </option>
            <option value="Neyveli,TamilNadu">Neyveli,TamilNadu</option>
            <option value="Rajapalayam,TamilNadu">Rajapalayam,TamilNadu</option>
            <option value="Vaniyambadi,TamilNadu">Vaniyambadi,TamilNadu</option>
            <option value="Nagercoil,TamilNadu">Nagercoil,TamilNadu</option>
            <option value="Ramanathapuram,TamilNadu">
              Ramanathapuram,TamilNadu
            </option>
            <option value="Viluppuram,TamilNadu">Viluppuram,TamilNadu</option>
            <option value="Namakkal,TamilNadu">Namakkal,TamilNadu</option>
            <option value="Thiruvarur,TamilNadu">Thiruvarur,TamilNadu</option>
            <option value="Dharmapuri,TamilNadu">Dharmapuri,TamilNadu</option>
            <option value="Krishnagiri,TamilNadu">Krishnagiri,TamilNadu</option>
            <option value="Thiruvallur,TamilNadu">Thiruvallur,TamilNadu</option>
            <option value="Theni,TamilNadu">Theni,TamilNadu</option>
            <option value="Ariyalur,TamilNadu">Ariyalur,TamilNadu</option>
            <option value="Perambalur,TamilNadu">Perambalur,TamilNadu</option>
            <option value="Virudhunagar,TamilNadu">
              Virudhunagar,TamilNadu
            </option>
            <option value="Ranipet,TamilNadu">Ranipet,TamilNadu</option>
            <option value="Kancheepuram,TamilNadu">
              Kancheepuram,TamilNadu
            </option>
            <option value="Kanyakumari,TamilNadu">Kanyakumari,TamilNadu</option>
            <option value="Kallakurichi,TamilNadu">
              Kallakurichi,TamilNadu
            </option>
            <option value="Chengalpattu,TamilNadu">
              Chengalpattu,TamilNadu
            </option>
            <option value="Mayiladuthurai,TamilNadu">
              Mayiladuthurai,TamilNadu
            </option>
            <option value="Kodaikanal,TamilNadu">Kodaikanal,TamilNadu</option>
            <option value="Maduranthakam,TamilNadu">
              Maduranthakam,TamilNadu
            </option>
            <option value="Gudalur,TamilNadu">Gudalur,TamilNadu</option>
          </select>
        </label>
        <label for="timing">
          Opens:

          <input
            type="num"
            name=""
            required
            pattern="[0-9]{2}"
            title="please enter 2digit value eg:07"
            id="openTiming_hour"
          />:
          <input
            type="num"
            name=""
            required
            pattern="[0-9]{2}"
            title="please enter 2digit value eg:07"
            id="openTiming_min"
          />
          <select name="time" required id="openTiming_period">
            <option value="">--</option>
            <option value="AM">AM</option>
            <option value="PM">PM</option>
          </select>

          Closes:
          <input
            type="num"
            name=""
            required
            pattern="[0-9]{2}"
            title="please enter 2digit value eg:07"
            id="closeTiming_hour"
          />:
          <input
            type="num"
            name=""
            required
            pattern="[0-9]{2}"
            title="please enter 2digit value eg:07"
            id="closeTiming_min"
          />
          <select name="time" required id="closeTiming_period">
            <option value="">--</option>
            <option value="AM">AM</option>
            <option value="PM">PM</option>
          </select>
        </label>

        <label for="S_year">
          Started_Year:

          <input
            type="num"
            name=""
            required
            pattern="[0-9]{4}"
            id="startedOn"
          />

          Workshoptype:
          <select name="type" required id="workshopType">
            <option value="">Select type</option>
            <option value="Two Wheelers">Two Wheelers</option>
            <option value="Three Wheelers">Three Wheelers</option>
            <option value="Four Wheelers">Four Wheelers</option>
          </select>
        </label>

        <label for="w_imgs">
          Workshop_Image

          <input type="text" name="" required id="workshopImage" />
        </label>

        <button type="submit">Next</button>
      </form>
    </div>
    <div class="container" id="Services">
      <h1>Service cost</h1>
      <form action="" id="service">
        <label for="General"
          >General_Services
          <span
            class="material-symbols-outlined"
            onclick="openProServices('general')"
          >
            expand_more
          </span>

          <p>Price:</p>
          <input
            type="num"
            placeholder="Expected Price "
            required
            title="less than six digits of amount"
            pattern="[0-9]{1,6}"
            title="less than six digits of amount"
            id="generalCost"
          />
        </label>
        <label for="list" class="serviceList" id="general"
          >Engine oil change,Oil filter replacement,Air filter
          cleaning/replacement,Spark plug replacement,Chain lubrication,Brake
          adjustment,Clutch adjustment,Throttle cable adjustment,Tyre pressure
          check,General inspection.
          <span class="material-symbols-outlined" onclick="openProServices()">
            expand_less
          </span>
        </label>
        <label for="standard"
          >Standard_Services
          <span
            class="material-symbols-outlined"
            onclick="openProServices('standard')"
          >
            expand_more
          </span>

          <p>Price:</p>
          <input
            type="num"
            placeholder="Expected Price "
            required
            pattern="[0-9]{2,6}"
            title="less than six digits of amount"
            id="standardCost"
          />
        </label>
        <label for="list" class="serviceList" id="standard"
          >Engine oil change,Oil filter replacement,Air filter
          cleaning/replacement,Spark plug replacement,Chain lubrication,Brake
          adjustment,Clutch adjustment,Throttle cable adjustment,Tyre pressure
          check,General inspection.
          <span class="material-symbols-outlined" onclick="openProServices()">
            expand_less
          </span>
        </label>
        <label for="premeium"
          >Premeium_Services
          <span
            class="material-symbols-outlined"
            onclick="openProServices('premeium')"
          >
            expand_more
          </span>

          <p>Price:</p>
          <input
            type="num"
            placeholder="Expected Price "
            required
            pattern="[0-9]{2,6}"
            title="less than six digits of amount"
            id="premeiumCost"
          />
        </label>
        <label for="list" class="serviceList" id="premeium"
          >Engine oil change,Oil filter replacement,Air filter
          cleaning/replacement,Spark plug replacement,Chain lubrication,Brake
          adjustment,Clutch adjustment,Throttle cable adjustment,Tyre pressure
          check,General inspection.
          <span class="material-symbols-outlined" onclick="openProServices()">
            expand_less
          </span>
        </label>
        <label for="full"
          >Full body_Analysis
          <span
            class="material-symbols-outlined"
            onclick="openProServices('fulll')"
          >
            expand_more
          </span>

          <p>Price:</p>
          <input
            type="num"
            placeholder="Expected Price "
            required
            pattern="[0-9]{2,6}"
            title="less than six digits of amount"
            id="fullbodyCost"
          />
        </label>
        <label for="list" class="serviceList" id="fulll"
          >Engine oil change,Oil filter replacement,Air filter
          cleaning/replacement,Spark plug replacement,Chain lubrication,Brake
          adjustment,Clutch adjustment,Throttle cable adjustment,Tyre pressure
          check,General inspection.
          <span class="material-symbols-outlined" onclick="openProServices()">
            expand_less
          </span>
        </label>
        <label for="brkdown"
          >Breakdown
          <span
            class="material-symbols-outlined"
            onclick="openProServices('brkdown')"
          >
            expand_more
          </span>

          <p>Price:</p>
          <input
            type="num"
            placeholder="Expected Price "
            required
            pattern="[0-9]{2,6}"
            title="less than six digits of amount"
            id="brkdownCost"
          />
        </label>
        <label for="list" class="serviceList" id="brkdown"
          >Engine oil change,Oil filter replacement,Air filter
          cleaning/replacement,Spark plug replacement,Chain lubrication,Brake
          adjustment,Clutch adjustment,Throttle cable adjustment,Tyre pressure
          check,General inspection.
          <span class="material-symbols-outlined" onclick="openProServices()">
            expand_less
          </span>
        </label>
        <button type="submit">submit</button>
      </form>
    </div>
    <script src="https://cdn.jsdelivr.net/gh/suryaumapathy2812/notify__js/notify.js"></script>

    <script src="../javascript/json.js"></script>
    <script src="../javascript/mechanic.js"></script>
    <script>
      let h_name = document.getElementById("h_name");
      h_name.innerText = "Hi!   " + log_cus["name"];

      let mechName = document.getElementById("name");
      mechName.value = log_cus["name"];

      let mechNum = document.getElementById("phone");
      mechNum.value = log_cus["number"];
      mechNum.setAttribute("disabled", true);

      let mechpass = document.getElementById("password");
      mechpass.value = log_cus["password"];

      const per_mech = document.getElementById("personal_form");
      per_mech.addEventListener("submit", function (e) {
        e.preventDefault();
        let name = document.getElementById("name").value;
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;
        let specialized = document.getElementById("v_type").value;
        let experience = document.getElementById("E_year").value;
        let profile_pic = document.getElementById("profilepic").value;

        let newObj = {
          name,
          email,
          password,
          specialized,
          experience,
          profile_pic,
        };
        let updatedObj = Object.assign(log_cus, newObj);
        mechanics[index] = updatedObj;
        localStorage.setItem("mechanics", JSON.stringify(mechanics));
        console.log(updatedObj);
        openprofile("Work_shop", "W_pro");
      });
      // Mechqnic Workshop
      const mechWorkForm = document.getElementById("workShopForm");
      mechWorkForm.addEventListener("submit", (e) => {
        e.preventDefault();
        let workshopName = document.getElementById("workshopName").value;
        let workshopNumber = document.getElementById("workshopNumber").value;
        let workshopAddress = document.getElementById("workshopAddress").value;
        let workshopCity = document.getElementById("workshopCity").value;
        let openTiming_hour = document.getElementById("openTiming_hour").value;
        let openTiming_min = document.getElementById("openTiming_min").value;
        let openTiming_period =
          document.getElementById("openTiming_period").value;
        let closeTiming_hour =
          document.getElementById("closeTiming_hour").value;
        let closeTiming_min = document.getElementById("closeTiming_min").value;
        let closeTiming_period =
          document.getElementById("closeTiming_period").value;
        let workshopType = document.getElementById("workshopType").value;
        let startedOn = document.getElementById("startedOn").value;
        let workshopImage = document.getElementById("workshopImage").value;
        let openTiming =
          openTiming_hour + ":" + openTiming_min + ":" + openTiming_period;
        let closeTiming =
          closeTiming_hour + ":" + closeTiming_min + ":" + closeTiming_period;

        // create obj
        let shopObject = {
          workshopName,
          workshopNumber,
          workshopAddress,
          workshopCity,
          workshopType,
          workshopImage,
          openTiming,
          closeTiming,
          startedOn,
        };

        // assign to existing object
        let update = Object.assign(mechWorkshop, shopObject);
        workshops[mechWorkshopIndex] = update;
        localStorage.setItem("workshops", JSON.stringify(workshops));
        openprofile("Services", "s_pro");
        Notify.success("Updated workshop successfully ");
      });

      // mechanic services
      const serviceform = document.getElementById("service");
      serviceform.addEventListener("submit", (e) => {
        e.preventDefault();
        let generalCost = document.getElementById("generalCost").value;
        let standardCost = document.getElementById("standardCost").value;
        let premeiumCost = document.getElementById("premeiumCost").value;
        let fullbodyCost = document.getElementById("fullbodyCost").value;
        let brkdownCost = document.getElementById("brkdownCost").value;

        let ser_obj = {
          generalCost,
          standardCost,
          premeiumCost,
          fullbodyCost,
          brkdownCost,
        };

        let update = Object.assign(oneService, ser_obj);
        services[serviceIndex] = update;

        localStorage.setItem("mechServices", JSON.stringify(services));
        alert("updated Service information");
        window.location.href = "./showMechProfile.html";
      });

      // validation
      let valiName = document.getElementById("name");
      valiName.addEventListener("change", (e) => {
        e = valiName.value;
        let check = hasnotAlphabet(e);
        if (check === true) {
          Notify.error("Only Alphabets are acceptable ");
        }
      });

      let valiPassword = document.getElementById("password");
      valiPassword.addEventListener("change", (e) => {
        e = valiPassword.value;
        let check = hasNumber(e);
        if (check === false || e.length != 6) {
          Notify.error("password should be 6 digits and only in numbers");
        }
      });
      //Workshop validation
      let workshopName = document.getElementById("workshopName");
      workshopName.addEventListener("change", (e) => {
        e = workshopName.value;
        let check = hasnotAlphabet(e);
        if (check === true) {
          Notify.error("Only Alphabets are acceptable ");
        }
      });
      // number
      let workshopNumber = document.getElementById("workshopNumber");
      workshopNumber.addEventListener("change", (e) => {
        e = workshopNumber.value;
        let check = hasNumber(e);
        if (check === false) {
          Notify.error("Only number are acceptable ");
        }
        if (e.length <= 14 || e.length >= 10) {
          Notify.error("Only 10 to 15 digits");
        }
      });
      // workshopAddress
      let workshopAddress = document.getElementById("workshopAddress");
      workshopAddress.addEventListener("change", (e) => {
        e = document.getElementById("workshopAddress").value;
        let check = checkAddress(e);
        if (check === true) {
          Notify.error("Use , or - or : instead of other symbols ");
          return;
        }
      });
      //timing
      let open1 = document.getElementById("openTiming_hour");
      open1.addEventListener("change", (e) => {
        e = open1.value;
        let check = hasNumber(e);
        if (check == false || e.length > 2) {
          Notify.error("Only hours should be mentioned within 2 digits");
        }
        if (e > 12) {
          Notify.error("hours should not be more than 12 ");
        }
      });
      let open2 = document.getElementById("openTiming_min");
      open2.addEventListener("change", (e) => {
        e = open2.value;
        let check = hasNumber(e);
        if (check == false || e.length > 2) {
          Notify.error("Only hours should be mentioned within 2 digits");
        }
        if (e > 60) {
          Notify.error("not more than 60 ");
        }
      });

      let close1 = document.getElementById("closeTiming_hour");
      close1.addEventListener("change", (e) => {
        e = close1.value;
        let check = hasNumber(e);
        if (check == false || e.length > 2) {
          Notify.error("Only hours should be mentioned within 2 digits");
        }
        if (e > 12) {
          Notify.error("hours should not be more than 12 ");
          return;
        }
      });
      let close2 = document.getElementById("closeTiming_min");
      close2.addEventListener("change", (e) => {
        e = close2.value;
        let check = hasNumber(e);
        if (check == false || e.length > 2) {
          Notify.error("Only hours should be mentioned within 2 digits");
        }
        if (e > 60) {
          Notify.error("not more than 60 ");
        }
      });
      //  year
      let workshopyear = document.getElementById("startedOn");
      workshopyear.addEventListener("change", (e) => {
        e = workshopyear.value;
        let check = hasNumber(e);
        let dte = new Date();
        let year = dte.getFullYear();
        if (check == false) {
          Notify.error("Only number are acceptable ");
        }
        if (e.length != 4) {
          Notify.error("year should be in 4 digits");
        }
        if (e > year) {
          Notify.error("Year can't be in future");
        }
      });
      validatePrice("generalCost", "generalCost");
      validatePrice("standardCost", "standardCost");
      validatePrice("premeiumCost", "premeiumCost");
      validatePrice("fullbodyCost", "fullbodyCost");
      validatePrice("brkdownCost", "brkdownCost");
    </script>
  </body>
</html>
